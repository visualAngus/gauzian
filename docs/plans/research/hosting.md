---
Generated by automation — Date: 2026-02-23
Sources: 
- /home/gael/Bureau/gauzian/docs/hebergement-benchmark.md
- Scaleway product pages: https://www.scaleway.com/en/kapsule/ , https://www.scaleway.com/en/object-storage/ , https://www.scaleway.com/en/managed-database/ , https://www.scaleway.com/en/managed-redis/
- OVH VPS page: https://www.ovhcloud.com/fr/vps/
Note: pricing recomputed from public pages; numbers are approximate unless explicitly marked exact.
---

# Hébergement — Benchmark & Stratégie Infra

## Contexte & Contraintes

Gauzian est un projet de drive cloud E2EE (End-to-End Encrypted) avec les contraintes suivantes :

- **100% français** : hébergement, données, infrastructure
- **Backend** : Rust avec Axum
- **Frontend** : Nuxt 3 (Vue 3)
- **Conteneurisation** : Docker + Kubernetes
- **Base de données** : PostgreSQL
- **Cache et sessions** : Redis (JWT blacklist + cache)
- **Stockage objet** : Compatible S3 (MinIO self-hosted → Object Storage cloud)
- **Marchés cibles** : Grand public, затем professionnellimité (HDS pour les données de santé)

La stratégie d'infrastructure doit accompagner la croissance du projet depuis le MVP actuel jusqu'à l'échelle industrielle, tout en respectant les contraintes de coût du bootstrapping et les exigences de conformité pour le marché français.

---

## OVH VPS — MVP Actuel

### Configuration actuelle

Le projet est actuellement hébergé sur un VPS OVHcloud VPS-2 (6 vCPU, 12 Go RAM, 100 Go SSD NVMe) à **5,95 €/mois HT**. Cette configuration permet d'exécuter l'ensemble des composants en conteneurisation Docker Compose.

### Upgrade Path

| Modèle | vCPU | RAM | Stockage | Prix HT/mois | Usage recommandé |
|--------|------|-----|----------|--------------|------------------|
| VPS-1 | 4 | 8 Go | 75 Go SSD | 3,82 € | Développement |
| **VPS-2 (actuel)** | **6** | **12 Go** | **100 Go NVMe** | **5,95 €** | **MVP en production** |
| VPS-3 (recommandé MVP) | 8 | 24 Go | 200 Go NVMe | 11,90 € | MVP avec marge |
| VPS-4 | 12 | 48 Go | 300 Go NVMe | 21,25 € | Croissance early |
| VPS-5 | 16 | 64 Go | 350 Go NVMe | 31,45 € | Limite avant switch |

**Recommandation immédiate** : Upgrade vers VPS-3 (11,90 €/mois) pour disposer de 24 Go RAM et 200 Go NVMe.

### Limites

- Scalabilité verticale limitée (pas de horizontal scaling)
- PostgreSQL, Redis, MinIO partagent les ressources
- Haute disponibilité nulle
- Maintenance opérationnelle significative

---

## Scaleway Managed Stack

### Composants

| Service | Modèle | Prix approximatif | Usage |
|---------|--------|------------------|-------|
| **Kubernetes Kapsule** | DEV1-M / GP1-S | 7,99-29,99 €/mois/nœud | Orchestration containers |
| **Managed PostgreSQL** | DB-PRO2-XXS / XS | ~80-160 €/mois | Base de données relationnelle |
| **Managed Redis** | RED1-MICRO / 2XS | ~35-54 €/mois | Cache + JWT blacklist |
| **Object Storage** | Standard | 0,02 €/Go/mois | Fichiers utilisateurs chiffrés |
| **Load Balancer** | — | ~12 €/mois | Terminaison HTTPS, routage |

### Architecture cible

```
┌─────────────────────────────────────────┐
│         Scaleway Load Balancer          │
│              (~12 €/mois)               │
└──────────────────┬──────────────────────┘
                   │
┌──────────────────▼──────────────────────┐
│         Kubernetes Kapsule               │
│  (Control plane gratuit, nœuds facturés) │
│                                          │
│  ┌─────────────┐  ┌──────────────────┐   │
│  │   Backend   │  │    Frontend     │   │
│  │  (Rust/Axum)│  │   (Nuxt 3)      │   │
│  │   x2-x5     │  │    x2-x5        │   │
│  └─────────────┘  └──────────────────┘   │
└──────────────────┬──────────────────────┘
                   │
    ┌──────────────┼──────────────┐
    ▼              ▼              ▼
┌─────────┐  ┌─────────┐  ┌───────────┐
│PostgreSQL│  │  Redis  │  │  Object   │
│ Managed │  │ Managed │  │  Storage  │
└─────────┘  └─────────┘  └───────────┘
```

### Avantages opérationnels

- Haute disponibilité avec failover automatique
- Auto-scaling horizontal (HPA) et vertical (VPA)
- Maintenance zero-ops (mises à jour gérées par Scaleway)
- Certifications HDS, ISO 27001, CNCF
- Isolation réseau VPC privé, chiffrement au repos AES-256

---

## Plan de Migration

```
VPS OVH (actuel)
     │
     ▼
[Phase 1] Upgrade VPS-3 (11,90 €)
     │  - Tests de charge
     │  - Validation performance
     ▼
[Phase 2] Migration Kubernetes (week-end)
     │  - Docker Compose → Helm charts
     │  - CI/CD pipeline
     ▼
[Phase 3] Services managés
     │  - PostgreSQL managed
     │  - Redis managed
     ▼
[Phase 4] Object Storage
     │  - Migration MinIO → Scaleway S3
     │  - Scripts de sync
     ▼
Post-seed ready (~144 €/mois)
```

### Déclencheurs de migration

**Objectifs** :
- >500 utilisateurs actifs mensuels
- >50 Go stockage utilisé
- >80% CPU utilisation moyenne VPS
- Levée de fonds seed

**Subjectifs** :
- Charge dev ops trop élevée
- Besoin de certifications HDS
- Besoins HA non négociables

---

## Scénarios de Coûts

### Scénario 1 — Launch (~500 utilisateurs)

| Composant | Modèle | Qté | Prix unitaire | Total |
|-----------|--------|-----|---------------|-------|
| Kubernetes (nœuds) | DEV1-M | 2 | 7,99 €/mois | 15,98 € |
| PostgreSQL managed | DB-PRO2-XXS | 1 | ~80 €/mois | 80,00 € |
| Redis managed | RED1-MICRO | 1 | ~35 €/mois | 35,00 € |
| Object Storage | Standard | 50 Go | 0,02 €/Go/mois | 1,00 € |
| Load Balancer | — | 1 | ~12 €/mois | 12,00 € |
| **Total** | | | | **~144 €/mois** |

### Scénario 2 — Growth (~5 000 utilisateurs)

| Composant | Modèle | Qté | Prix unitaire | Total |
|-----------|--------|-----|---------------|-------|
| Kubernetes (nœuds) | GP1-S | 3 | 29,99 €/mois | 89,97 € |
| PostgreSQL managed | DB-PRO2-XXS | 1 | ~80 €/mois | 80,00 € |
| Redis managed | RED1-MICRO | 1 | ~35 €/mois | 35,00 € |
| Object Storage | Standard | 500 Go | 0,02 €/Go/mois | 10,00 € |
| Load Balancer | — | 1 | ~12 €/mois | 12,00 € |
| **Total** | | | | **~227 €/mois** |

### Scénario 3 — Scale (~50 000 utilisateurs)

| Composant | Modèle | Qté | Prix unitaire | Total |
|-----------|--------|-----|---------------|-------|
| Kubernetes (nœuds) | GP1-S | 5 | 29,99 €/mois | 149,95 € |
| PostgreSQL managed | DB-PRO2-XS | 1 | ~160 €/mois | 160,00 € |
| Redis managed | RED1-2XS | 1 | ~54 €/mois | 54,00 € |
| Object Storage | Standard | 5 To | 0,02 €/Go/mois | 100,00 € |
| Load Balancer | — | 2 | ~12 €/mois | 24,00 € |
| **Total** | | | | **~488 €/mois** |

---

## Recommandation

Le passage à Scaleway Managed est recommandé dès que le projet lève des fonds ou atteint 500+ utilisateurs actifs. Le modèle OVH VPS reste idéal pour le bootstrapping et le MVP initial grâce à son coût minimal. La migration vers Scaleway apporte une scalabilité horizontale, une haute disponibilité native, et les certifications HDS indispensables pour le marché de la santé.

Les coûts mensuels restent prévisibles et progressent de ~144 € (launch) à ~488 € (scale), avec un coût par utilisateur qui diminue grâce aux économies d'échelle.

---

## Prochaines Étapes

1. **Court terme** : Upgrade VPS-2 → VPS-3 pour le MVP
2. **Court terme** : Sauvegardes automatisées (rclone vers Scaleway Object Storage)
3. **Moyen terme** : Préparer Helm charts et Dockerfiles pour Kubernetes
4. **Moyen terme** : Tester environnement Scaleway (staging)
5. **Post-seed** : Migration progressive vers Scaleway Managed
6. **Long terme** : Évaluer SecNumCloud (ANSSI) si accès marchés publics sensibles
